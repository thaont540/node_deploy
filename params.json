{"name":"Laravel simple deployer","tagline":"This tool deploy Laravel, used Nodejs.","body":"# Laravel deployer\r\n*Note* Deployed Laravel folders will be organized same [Rocketeer](http://rocketeer.autopergamene.eu/) deployed, so this app could be used while using Rocketeer. If this is the first time you setup your project, so you need setup project folders by manual.\r\n\r\nThis will be: `/var/www/project_name/github_name/{releases - shared - current}`\r\n## Manual setup\r\n### Install requirement\r\n```\r\n$ sudo apt-get install git\r\n$ curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -\r\n$ sudo apt-get install -y nodejs\r\n$ npm install pm2 -g\r\n```\r\n### Setting\r\n- Git clone from [Master branch](https://github.com/thaont540/node_deploy)\r\n- Move to folder `node_deploy`\r\n- Config `.env` file\r\n```\r\ncp .env.example .env\r\n```\r\n*Note* Go to [Personal access tokens ](https://github.com/settings/tokens) to get token for `GITHUB_AUTH_TOKEN`\r\n- Install package:\r\n```\r\n$ npm install\r\n```\r\n- Run in background:\r\n```\r\n$ pm2 start app.js\r\n```\r\n## Auto setup\r\n![](https://github.com/thaont540/node_deploy/blob/master/bash.png)\r\n- Download bash file [install.sh](https://github.com/thaont540/node_deploy/blob/master/install.sh) then move it to `/var/www/`\r\n- Change to `deploy` user\r\n```\r\n$ sudo su - deploy\r\n```\r\n- Then run this file in `deploy` user\r\n```\r\n$ ./install.sh\r\n```\r\n### Bash file with su permission\r\n- Download bash file [sudo_install.sh](https://github.com/thaont540/node_deploy/blob/master/sudo_install.sh) then move it to `/var/www/`\r\n- Then run with sudo:\r\n```\r\n$ sudo ./sudo_install.sh\r\n```\r\n\r\n## Nginx setup\r\n- Use reverse proxy\r\n```\r\n#.....\r\nlocation ^~/socket.io/ {\r\n    proxy_pass http://localhost:8001; #node port\r\n    proxy_http_version 1.1;\r\n    proxy_set_header Upgrade $http_upgrade;\r\n    proxy_set_header Connection \"upgrade\";\r\n    proxy_redirect off;\r\n\r\n    proxy_buffers 8 32k;\r\n    proxy_buffer_size 64k;\r\n\r\n    proxy_set_header X-Real-IP $remote_addr;\r\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\n    proxy_set_header Host $host;\r\n    proxy_set_header X-NginX-Proxy true;\r\n}\r\nlocation /deploy {\r\n    proxy_pass http://localhost:8001;\r\n    proxy_http_version 1.1;\r\n    proxy_set_header Upgrade $http_upgrade;\r\n    proxy_set_header Connection \"upgrade\";\r\n    proxy_redirect off;\r\n\r\n    proxy_buffers 8 32k;\r\n    proxy_buffer_size 64k;\r\n\r\n    proxy_set_header X-Real-IP $remote_addr;\r\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\r\n    proxy_set_header Host $host;\r\n    proxy_set_header X-NginX-Proxy true;\r\n}\r\n#....\r\n```\r\n**!! Note !!** If your project used Laravel echo or something else like socketIO, this will get conflict.\r\n## How to use\r\n![](https://github.com/thaont540/node_deploy/raw/master/demo.png)\r\n- Go to `https://yourdomain.com/deploy` to start deploy\r\n- Go to `https://yourdomain.com/deploy/edit-env` to edit env file\r\n- Check pm2 at [pm2.keymetrics.io](https://pm2.keymetrics.io/)\r\n- Get Github auth token [here](https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line)\r\n- Deployed Laravel folders will be organized same [Rocketeer](http://rocketeer.autopergamene.eu/) deployed","note":"Don't delete this file! It's used internally to help with page regeneration."}